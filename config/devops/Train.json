{"source":2,"revision":4,"description":null,"createdBy":{"displayName":"steve","url":"https://spsprodcus4.vssps.visualstudio.com/A1ffd8b3c-0ce8-4890-8a55-5f4ecb9de91d/_apis/Identities/c53c7af2-afda-627b-8f6f-ba8d57b745c0","_links":{"avatar":{"href":"https://dev.azure.com/latticecraft/_apis/GraphProfile/MemberAvatars/msa.YzUzYzdhZjItYWZkYS03MjdiLThmNmYtYmE4ZDU3Yjc0NWMw"}},"id":"c53c7af2-afda-627b-8f6f-ba8d57b745c0","uniqueName":"steve@latticecraft.io","imageUrl":"https://dev.azure.com/latticecraft/_apis/GraphProfile/MemberAvatars/msa.YzUzYzdhZjItYWZkYS03MjdiLThmNmYtYmE4ZDU3Yjc0NWMw","descriptor":"msa.YzUzYzdhZjItYWZkYS03MjdiLThmNmYtYmE4ZDU3Yjc0NWMw"},"createdOn":"2022-07-05T01:29:08.100Z","modifiedBy":{"displayName":"steve","url":"https://spsprodcus4.vssps.visualstudio.com/A1ffd8b3c-0ce8-4890-8a55-5f4ecb9de91d/_apis/Identities/c53c7af2-afda-627b-8f6f-ba8d57b745c0","_links":{"avatar":{"href":"https://dev.azure.com/latticecraft/_apis/GraphProfile/MemberAvatars/msa.YzUzYzdhZjItYWZkYS03MjdiLThmNmYtYmE4ZDU3Yjc0NWMw"}},"id":"c53c7af2-afda-627b-8f6f-ba8d57b745c0","uniqueName":"steve@latticecraft.io","imageUrl":"https://dev.azure.com/latticecraft/_apis/GraphProfile/MemberAvatars/msa.YzUzYzdhZjItYWZkYS03MjdiLThmNmYtYmE4ZDU3Yjc0NWMw","descriptor":"msa.YzUzYzdhZjItYWZkYS03MjdiLThmNmYtYmE4ZDU3Yjc0NWMw"},"modifiedOn":"2022-07-19T03:28:15.180Z","isDeleted":false,"variables":{},"variableGroups":[],"environments":[{"id":16,"name":"Stage 1","rank":1,"owner":{"displayName":"steve","url":"https://spsprodcus4.vssps.visualstudio.com/A1ffd8b3c-0ce8-4890-8a55-5f4ecb9de91d/_apis/Identities/c53c7af2-afda-627b-8f6f-ba8d57b745c0","_links":{"avatar":{"href":"https://dev.azure.com/latticecraft/_apis/GraphProfile/MemberAvatars/msa.YzUzYzdhZjItYWZkYS03MjdiLThmNmYtYmE4ZDU3Yjc0NWMw"}},"id":"c53c7af2-afda-627b-8f6f-ba8d57b745c0","uniqueName":"steve@latticecraft.io","imageUrl":"https://dev.azure.com/latticecraft/_apis/GraphProfile/MemberAvatars/msa.YzUzYzdhZjItYWZkYS03MjdiLThmNmYtYmE4ZDU3Yjc0NWMw","descriptor":"msa.YzUzYzdhZjItYWZkYS03MjdiLThmNmYtYmE4ZDU3Yjc0NWMw"},"variables":{"aksComputeName":{"value":"","allowOverride":true},"amlModelName":{"value":"$(Release.Artifacts.{amlModelArtifactAlias}.DefinitionName)","allowOverride":true},"amlModelVersion":{"value":"$(Release.Artifacts.{amlModelArtifactAlias}.BuildId)","allowOverride":true},"amlRepoArtifactAlias":{"value":"","allowOverride":true},"deploymentConfigFile":{"value":"deploymentConfig.yml"},"inferenceConfigFile":{"value":"inferenceConfig.yml"},"resourceGroupName":{"value":"","allowOverride":true},"serviceName":{"value":"","allowOverride":true},"workspaceName":{"value":"","allowOverride":true}},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":46}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":47},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":48}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":null,"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":4,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Run on agent","refName":null,"workflowTasks":[{"environment":{},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"Command Line Script","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"dir /s","workingDirectory":"$(System.DefaultWorkingDirectory)/$(amlRepoArtifactAlias)","failOnStderr":"false"}},{"environment":{},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"Install dependencies","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"pip install --no-input pyyaml\npip install --no-input azure-cli","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"taskId":"6392f95f-7e76-4a18-b3c7-7f078d2f7700","version":"0.*","name":"Generate YAML","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"scriptSource":"filePath","scriptPath":"$(System.DefaultWorkingDirectory)/_Latticecraft_Azure-ML-Accelerator/src/commands/train.py","script":"$(System.DefaultWorkingDirectory)/_Latticecraft_Azure-ML-Accelerator/src/commands/featurize.py","arguments":"--project $(Name) --type $(Type) --primary-metric $(PrimaryMetric) --source $(Source) --label $(Label) --run False --filename train-gen.yaml","pythonInterpreter":"","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"2.*","name":"Run pipeline Job","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"10431cbd-3ae9-48f4-9fef-efd28c2d5a48","scriptType":"pscore","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"az extension add -n ml\n\naz ml job create --resource-group $(ResourceGroup) --workspace-name $(MLWorkspaceName) --file _Latticecraft_Azure-ML-Accelerator/config/pipeline/train-gen.yaml --web --set inputs.project=$(Name) --set inputs.source=\"$(Source)\" --set inputs.type=$(Type) --set inputs.primary_metric=$(PrimaryMetric) --set inputs.datasets_pkl.path=azureml://datastores/output/paths/$(Name)/gold/ --set inputs.trainlog.path=azureml://datastores/output/paths/$(Name)/trainlog --set experiment_name=$(Name) --set inputs.label=$(Label) --set inputs.web_hook=\"$(WebHookUrl)\" --set inputs.next_pipeline=$(UpdateDashboardId)","scriptArguments":"","powerShellErrorActionPreference":"stop","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"$(System.DefaultWorkingDirectory)/$(amlRepoArtifactAlias)","failOnStandardError":"false","powerShellIgnoreLASTEXITCODE":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":0,"url":"https://vsrm.dev.azure.com/latticecraft/c79de25e-0066-4bad-8f9b-19b43f275623/_apis/Release/releases/0","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"unmapped"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/latticecraft/_apis/public/Release/badge/c79de25e-0066-4bad-8f9b-19b43f275623/16/16"}],"artifacts":[{"sourceId":"eae9c776-f4b0-48e7-9886-2ba261aa1766:Latticecraft/Azure-ML-Accelerator","type":"GitHub","alias":"_Latticecraft_Azure-ML-Accelerator","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://github.com/Latticecraft/Azure-ML-Accelerator","name":""},"branch":{"id":"main","name":"main"},"checkoutNestedSubmodules":{"id":"True","name":"Any nested submodules within"},"checkoutSubmodules":{"id":"","name":""},"connection":{"id":"eae9c776-f4b0-48e7-9886-2ba261aa1766","name":"Latticecraft"},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionType":{"id":"latestFromBranchType","name":"Latest from the default branch"},"definition":{"id":"Latticecraft/Azure-ML-Accelerator","name":"Latticecraft/Azure-ML-Accelerator"},"fetchDepth":{"id":"","name":""},"gitHubRepositoryId":{"id":"504393437","name":"504393437"},"gitLfsSupport":{"id":"","name":""}},"isPrimary":true,"isRetained":false}],"triggers":[],"releaseNameFormat":"Release-$(rev:r)","tags":[],"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"ReleaseClone"},"IntegrateBoardsWorkItems":{"$type":"System.String","$value":"False"},"IntegrateJiraWorkItems":{"$type":"System.String","$value":"false"}},"id":16,"name":"Train","path":"\\Template","projectReference":null,"url":"https://vsrm.dev.azure.com/latticecraft/c79de25e-0066-4bad-8f9b-19b43f275623/_apis/Release/definitions/16","_links":{"self":{"href":"https://vsrm.dev.azure.com/latticecraft/c79de25e-0066-4bad-8f9b-19b43f275623/_apis/Release/definitions/16"},"web":{"href":"https://dev.azure.com/latticecraft/c79de25e-0066-4bad-8f9b-19b43f275623/_release?definitionId=16"}}}